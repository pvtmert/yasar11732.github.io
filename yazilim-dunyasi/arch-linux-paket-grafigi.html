<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="tr">
<head>
<meta charset="utf-8">
<meta name="description" content="numpy ve matplotlib kullanarak görselleştirmek için, bir kayıt dosyasından veriler alınıyor. Python ile grafik çizme örneği görmek için okuyun.">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Arch Linux Paket Grafiği | Python, Yazılım, ve Programlama</title>
<link href="../assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="../assets/css/html4css1.css" rel="stylesheet" type="text/css">
<link href="../assets/css/nikola_rst.css" rel="stylesheet" type="text/css">
<link href="../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../assets/css/colorbox.css" rel="stylesheet" type="text/css">
<link href="../assets/css/theme.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../rss.xml">
<link rel="canonical" href="http://ysar.net/yazilim-dunyasi/arch-linux-paket-grafigi.html">
<!--[if lt IE 9]><script src="../assets/js/html5.js"></script><![endif]--><link rel="stylesheet" type="text/css" href="../styles/main.css">
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-3760371725357973",
    enable_page_level_ads: true
  });
</script><meta name="author" content="Yaşar Arabacı">
<link rel="prev" href="../algoritma/kimya-formula-parser.html" title="Kimya formülü ayrıştırıcısı" type="text/html">
<link rel="next" href="arch-linux-paket-grafigi-2.html" title="Arch Linux Paket Grafiği - 2" type="text/html">
<meta property="og:site_name" content="Python, Yazılım, ve Programlama">
<meta property="og:title" content="Arch Linux Paket Grafiği">
<meta property="og:url" content="http://ysar.net/yazilim-dunyasi/arch-linux-paket-grafigi.html">
<meta property="og:description" content="numpy ve matplotlib kullanarak görselleştirmek için, bir kayıt dosyasından veriler alınıyor. Python ile grafik çizme örneği görmek için okuyun.">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2012-01-08T00:22:00+02:00">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Ana içeriğe geç</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://ysar.net/">

                <span id="blog-title">Python, Yazılım, ve Programlama</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" role="navigation" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../yasar-arabaci.html">Hakkımda</a>
                </li>
<li>
<a href="../soru-cevap.html">Soru-Cevap</a>
                </li>
<li>
<a href="../archive.html">Arşiv</a>
                </li>
<li>
<a href="../rss.xml">RSS kaynağı</a>

                
            </li>
</ul>
<!-- Custom search with google--><form id="search" action="//www.google.com/search" method="get" class="navbar-form pull-left">
<input type="hidden" name="q" value="site:http://ysar.net/"><input type="text" name="q" maxlength="255" results="0" placeholder="Search">
</form>
<!-- End of custom search -->


            <ul class="nav navbar-nav navbar-right">
<li>
    <a href="arch-linux-paket-grafigi.md" id="sourcelink">Kaynak</a>
    </li>

                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">Arch Linux Paket Grafiği</a></h1>

        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                    Yaşar Arabacı
            </span></p>
            <p class="dateline"><a href="#" rel="bookmark"><time class="published dt-published" datetime="2012-01-08T00:22:00+02:00" itemprop="datePublished" title="2012-01-08 00:22">2012-01-08 00:22</time></a></p>
            
        <p class="sourceline"><a href="arch-linux-paket-grafigi.md" class="sourcelink">Kaynak</a></p>

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<p>Şu aralar, Python'daki bilimsel araçlar ve grafik kütüphanelerini
inceliyorum. Bunlarla uğraşırken, merak edip, işletim sistemimi kurduğum
günden bu yana paket ekleme, kaldırma ve güncelleme sayılarımın
grafiğini çizdirdim. Bunlarla ilgilenenler, aşağıdaki örneğe göz atmak
isteyebilirler. <!-- TEASER_END --></p>
<p><img alt="Arch Linux Packages Graph" src="../images/package-graph.png"></p>
<pre class="code literal-block"><span></span><span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">matplotlib.dates</span> <span class="kn">as</span> <span class="nn">mdates</span>

<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Counter</span>

<span class="n">months</span>    <span class="o">=</span> <span class="n">mdates</span><span class="o">.</span><span class="n">MonthLocator</span><span class="p">()</span>  <span class="c1"># every month</span>
<span class="n">days</span>      <span class="o">=</span> <span class="n">mdates</span><span class="o">.</span><span class="n">DayLocator</span><span class="p">()</span> <span class="c1"># Every day</span>
<span class="n">monthsFmt</span> <span class="o">=</span> <span class="n">mdates</span><span class="o">.</span><span class="n">DateFormatter</span><span class="p">(</span><span class="s1">'%m-%Y'</span><span class="p">)</span>

<span class="n">logfile</span> <span class="o">=</span> <span class="s2">"/var/log/pacman.log"</span>
<span class="n">interesting_line</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
    <span class="sa">r</span><span class="s2">"\[(?P\d{4}-\d{2}-\d{2} \d{2}:\d{2})\] "</span>
    <span class="s2">"(?Pinstalled|upgraded|removed)"</span><span class="p">)</span>

<span class="n">installs</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">()</span>
<span class="n">upgrades</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">()</span>
<span class="n">removes</span>  <span class="o">=</span> <span class="n">Counter</span><span class="p">()</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">logfile</span><span class="p">)</span> <span class="k">as</span> <span class="n">logfile</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">logfile</span><span class="p">:</span>
        <span class="n">match</span> <span class="o">=</span> <span class="n">interesting_line</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
            <span class="n">struct</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s2">"datetime"</span><span class="p">),</span><span class="s2">"%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%S"</span><span class="p">)</span>
            <span class="n">date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="n">struct</span><span class="o">.</span><span class="n">tm_year</span><span class="p">,</span> <span class="n">struct</span><span class="o">.</span><span class="n">tm_mon</span><span class="p">,</span> <span class="n">struct</span><span class="o">.</span><span class="n">tm_mday</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s2">"action"</span><span class="p">)</span> <span class="o">==</span> <span class="s2">"installed"</span><span class="p">:</span>
                <span class="n">installs</span><span class="p">[</span><span class="n">date</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">elif</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s2">"action"</span><span class="p">)</span> <span class="o">==</span> <span class="s2">"upgraded"</span><span class="p">:</span>
                <span class="n">upgrades</span><span class="p">[</span><span class="n">date</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">elif</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s2">"action"</span><span class="p">)</span> <span class="o">==</span> <span class="s2">"removed"</span><span class="p">:</span>
                <span class="n">removes</span><span class="p">[</span><span class="n">date</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
<span class="n">insdatenumpairs</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="n">installs</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="n">installs</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
<span class="n">insdatenumpairs</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">insdatenumpairs</span><span class="p">,</span> <span class="n">key</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">pair</span><span class="p">:</span> <span class="n">pair</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="n">upgdatenumpairs</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="n">upgrades</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="n">upgrades</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
<span class="n">upgdatenumpairs</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">upgdatenumpairs</span><span class="p">,</span> <span class="n">key</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">pair</span><span class="p">:</span> <span class="n">pair</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="n">remdatenumpairs</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="n">removes</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="n">removes</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
<span class="n">remdatenumpairs</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">remdatenumpairs</span><span class="p">,</span> <span class="n">key</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">pair</span><span class="p">:</span> <span class="n">pair</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="n">pair</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="n">insdatenumpairs</span><span class="p">],[</span><span class="n">pair</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="n">insdatenumpairs</span><span class="p">],</span><span class="s2">"b"</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="n">pair</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="n">upgdatenumpairs</span><span class="p">],[</span><span class="n">pair</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="n">upgdatenumpairs</span><span class="p">],</span><span class="s2">"g"</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="n">pair</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="n">remdatenumpairs</span><span class="p">],[</span><span class="n">pair</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="n">remdatenumpairs</span><span class="p">],</span><span class="s2">"y"</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">months</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">monthsFmt</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">days</span><span class="p">)</span>

<span class="n">datemin</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">installs</span><span class="p">)</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">installs</span><span class="p">)</span><span class="o">.</span><span class="n">month</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">installs</span><span class="p">)</span><span class="o">.</span><span class="n">day</span><span class="p">)</span>
<span class="n">mdate</span> <span class="o">=</span> <span class="nb">max</span><span class="p">([</span><span class="nb">max</span><span class="p">(</span><span class="n">installs</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">upgrades</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">removes</span><span class="p">)])</span>
<span class="n">datemax</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="n">mdate</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="n">mdate</span><span class="o">.</span><span class="n">month</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">mdate</span><span class="o">.</span><span class="n">day</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">datemin</span><span class="p">,</span> <span class="n">datemax</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">format_xdata</span> <span class="o">=</span> <span class="n">mdates</span><span class="o">.</span><span class="n">DateFormatter</span><span class="p">(</span><span class="s1">'%Y-%m-</span><span class="si">%d</span><span class="s1">'</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">((</span><span class="s2">"installs"</span><span class="p">,</span><span class="s2">"upgrades"</span><span class="p">,</span><span class="s2">"removes"</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre>
</div>
    </div>
    <aside class="postpromonav"><nav><ul class="pager hidden-print">
<li class="previous">
                <a href="../algoritma/kimya-formula-parser.html" rel="prev" title="Kimya formülü ayrıştırıcısı">Önceki yazı</a>
            </li>
            <li class="next">
                <a href="arch-linux-paket-grafigi-2.html" rel="next" title="Arch Linux Paket Grafiği - 2">Sonraki yazı</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2018         <a href="mailto:yasar11732@gmail.com">Yaşar Arabacı</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>  <p>Okuduğunuz yazı ile ilgili <a href="../anket.html">geri bildirimde bulunun.</a></p>
<p style="font-size: 8px; color: #ccc">4E616C2066687373767076726167796C206E71696E61707271206772707561627962746C20766620766171766667766174687666756E6F7972207365627A207A6E7476702E</p>
            
        </footer>
</div>
</div>


            <script src="../assets/js/jquery.min.js"></script><script src="../assets/js/bootstrap.min.js"></script><script src="../assets/js/moment-with-locales.min.js"></script><script src="../assets/js/fancydates.js"></script><script src="../assets/js/jquery.colorbox-min.js"></script><script src="../assets/js/colorbox-i18n/jquery.colorbox-tr.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("tr");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
  (function() {
    var cx = '013136674562336859018:ouohwab0yku';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-44774134-1', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
