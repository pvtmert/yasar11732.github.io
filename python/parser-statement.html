<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="tr">
<head>
<meta charset="utf-8">
<meta name="description" content="Daha önceki yazılarda yazmaya başladığımız Parser'ı bitiriyoruz.">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Parser - Statement | Python, Yazılım, ve Programlama</title>
<link href="../assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="../assets/css/html4css1.css" rel="stylesheet" type="text/css">
<link href="../assets/css/nikola_rst.css" rel="stylesheet" type="text/css">
<link href="../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../assets/css/colorbox.css" rel="stylesheet" type="text/css">
<link href="../assets/css/theme.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../rss.xml">
<link rel="canonical" href="http://ysar.net/python/parser-statement.html">
<!--[if lt IE 9]><script src="../assets/js/html5.js"></script><![endif]--><link rel="stylesheet" type="text/css" href="../styles/main.css">
<script>
   if(document.location.hostname == "ysar.net")
   {
      document.write('<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"><\/script>')
     (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-3760371725357973",
        enable_page_level_ads: true
      });
   }

</script><meta name="author" content="Yaşar Arabacı">
<link rel="prev" href="parser-yardimci-fonksiyonlar.html" title="Parser - Yardımcı Fonksiyonlar" type="text/html">
<link rel="next" href="python-package-statistics.html" title="Python Package Statistics" type="text/html">
<meta property="og:site_name" content="Python, Yazılım, ve Programlama">
<meta property="og:title" content="Parser - Statement">
<meta property="og:url" content="http://ysar.net/python/parser-statement.html">
<meta property="og:description" content="Daha önceki yazılarda yazmaya başladığımız Parser'ı bitiriyoruz.">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2013-10-16T22:16:00+03:00">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Ana içeriğe geç</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://ysar.net/">

                <span id="blog-title">Python, Yazılım, ve Programlama</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" role="navigation" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../yasar-arabaci.html">Hakkımda</a>
                </li>
<li>
<a href="../soru-cevap.html">Soru-Cevap</a>
                </li>
<li>
<a href="../archive.html">Arşiv</a>
                </li>
<li>
<a href="../rss.xml">RSS kaynağı</a>

                
            </li>
</ul>
<!-- Custom search with google--><form id="search" action="//www.google.com/search" method="get" class="navbar-form pull-left">
<input type="hidden" name="q" value="site:http://ysar.net/"><input type="text" name="q" maxlength="255" results="0" placeholder="Search">
</form>
<!-- End of custom search -->


            <ul class="nav navbar-nav navbar-right">
<li>
    <a href="parser-statement.md" id="sourcelink">Kaynak</a>
    </li>

                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">Parser - Statement</a></h1>

        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                    Yaşar Arabacı
            </span></p>
            <p class="dateline"><a href="#" rel="bookmark"><time class="published dt-published" datetime="2013-10-16T22:16:00+03:00" itemprop="datePublished" title="2013-10-16 22:16">2013-10-16 22:16</time></a></p>
            
        <p class="sourceline"><a href="parser-statement.md" class="sourcelink">Kaynak</a></p>

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<p>Evet, son bıraktığımızda, Parser'ımız expression'ları parse edebiliyordu. Ancak, henüz tek bir expression parse edebiliyoruz. Bu yazıda,
statement'ları nasıl parse edeceğimize değineceğiz.</p>
<p>Önce statement (beyan) nedir, ona biraz değinelim. Statement, expression'dan bir üst kategori diyebiliriz. Her expression, aynı
zamanda bir statement olabilir. Ancak, her statement bir expression olamaz. Mesela, programlama dillerindeki <code>if</code> sözcüğü bir statement
tanımlar, ama <code>if</code> statement'ı bir expression diyemeyiz.</p>
<p>Statement'ları parse edebilmek için, statement başlatan sembollerimize özel bir <code>std</code> metodu tanımlayacağız. Örneğin, if statement
yapmak için gerekli olan sembolü, sembol tablosuna ekleyelim: <!-- TEASER_END --></p>
<pre class="code literal-block"><span></span><span class="k">def</span> <span class="nf">statement</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">std</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_symbol</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span><span class="o">.</span><span class="n">beginStatement</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_symbol</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span><span class="o">.</span><span class="n">std</span> <span class="o">=</span> <span class="n">std</span>


<span class="k">def</span> <span class="nf">ifStatement</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">first</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">Expression</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">_advance</span><span class="p">([</span><span class="s2">":"</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">_advance</span><span class="p">([</span><span class="s2">"NEWLINE"</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">second</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">Block</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">token</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="s2">"else"</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">_advance</span><span class="p">([</span><span class="s2">"else"</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">_advance</span><span class="p">([</span><span class="s2">":"</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">_advance</span><span class="p">([</span><span class="s2">"NEWLINE"</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">third</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">Block</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">self</span>

<span class="n">statement</span><span class="p">(</span><span class="s2">"if"</span><span class="p">,</span> <span class="n">ifStatement</span><span class="p">)</span>
</pre>


<p>Tahmin edeceğiniz gibi, bunlar <code>_prepareSymTable</code> metodunun içine gidiyor.</p>
<p><code>ifStatement</code>, önce, bir expression alıp bunu ilk ögesi olarak ayarlıyor. Daha sonra, bir ":" ve bir "NEWLINE" sembolü ilerledikten
sonra, ikinci elemanını bulmak için Parser metodunun <code>Block</code> metodunu çağırıyor.</p>
<pre class="code literal-block"><span></span><span class="k">def</span> <span class="nf">Block</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_advance</span><span class="p">([</span><span class="s2">"INDENT"</span><span class="p">])</span>
    <span class="n">stmts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Statements</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_advance</span><span class="p">([</span><span class="s2">"DEDENT"</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">stmts</span>
</pre>


<p>Bu, <code>Parser</code> sınıfının bir metodu olacak. Önce bir indent ilerliyor, sonra bir statement listesi alıyor, sonra bir dedent daha
ilerleyip, statement listesini döndürüyor. Ben, Python gibi, indentation tabanlı block'lar yapmak istedim. Siz isterseniz block'larınızı
"{" ile başlatıp, "}" ile bitirebilirsiniz.</p>
<pre class="code literal-block"><span></span><span class="k">def</span> <span class="nf">Statements</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">statements</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">token</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">"END"</span><span class="p">,</span><span class="s2">"DEDENT"</span><span class="p">]:</span>
            <span class="k">break</span>
        <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Statement</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">s</span><span class="p">:</span>
            <span class="n">statements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">statements</span>
</pre>


<p>Çok açıklayacak birşey yok, END veya DEDENT görene kadar, bir statement parse edip, bunları listeye koyup gönderiyoruz.</p>
<pre class="code literal-block"><span></span><span class="k">def</span> <span class="nf">Statement</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">token</span>
    <span class="k">if</span> <span class="n">t</span><span class="o">.</span><span class="n">beginStatement</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_advance</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">t</span><span class="o">.</span><span class="n">std</span><span class="p">()</span> 
    <span class="n">ex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Expression</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_advance</span><span class="p">([</span><span class="s2">"NEWLINE"</span><span class="p">,</span><span class="s2">"END"</span><span class="p">,</span><span class="s2">"DEDENT"</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">ex</span>
</pre>


<p>Eğer, geçerli token bir statement başlangıcıysa, onun std metodunun sonucunu döndürüyoruz, eğer değilse, bir expression parse edip, sonra
bir "NEWLINE", "END" veya "DEDENT" ilerleyip, sonucu döndürüyoruz. Eğer expression parse edildiğinde geçerli token bunlardan bir tanesi
değilse, bu okuduğumuz girdi, bizim yazım kurallarımıza uygun değil demek. Bir diğer deyişle, SyntaxError.</p>
<p>Şimdi, şunu parse etmeyi deneyelim:</p>
<pre>
if yasar:
    a = a + 12
else:
    a = 12
    b = 25
</pre>

<p>Test etmek için kullandığımız kodlar:</p>
<pre class="code literal-block"><span></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">"__main__"</span><span class="p">:</span>
    <span class="n">tokenq</span> <span class="o">=</span> <span class="n">Queue</span><span class="p">()</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">"test.txt"</span><span class="p">)</span> <span class="k">as</span> <span class="n">dosya</span><span class="p">:</span>
        <span class="n">myinput</span> <span class="o">=</span> <span class="n">dosya</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

    <span class="n">mylexer</span> <span class="o">=</span> <span class="n">Lexer</span><span class="p">(</span><span class="n">myinput</span><span class="p">,</span> <span class="n">tokenq</span><span class="p">)</span>
    <span class="n">mylexer</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="n">myparser</span> <span class="o">=</span> <span class="n">Parser</span><span class="p">(</span><span class="n">tokenq</span><span class="p">)</span>

    <span class="k">print</span> <span class="s2">"parse result:"</span><span class="p">,</span><span class="n">myparser</span><span class="o">.</span><span class="n">Statements</span><span class="p">()</span>
</pre>


<p>Ve sonuç:</p>
<pre>
parse result: [(if (NAME yasar) [(= (NAME a) (+ (NAME a) (NUMBER 12)))] [(= (NAME a) (NUMBER 12)), (= (NAME b) (NUMBER 25))])]
</pre>

<h3>Bundan sonra?</h3>
<p>Bundan sonrası size kalmış. Yeni dil kuralları ekleyin, yeni operatörler tanımlayın, artık canınız ne çekerse.</p>
<h4>Peki ya ondan sonra?</h4>
<p>Son olarak, elde ettiğiniz parse tree'i kullanılabilecek bir veri türüne çevirebilir veya bir yorumlayıcı yazarak çalıştırabilirsiniz.</p>
<p>İsterseniz makine koduna derleyin, ister başka bir programlama diline derleyin, isterseniz JSON yapın, ister html'e dönüştürün, isterseniz
grafiğini çizin, böyle oklar falan olsun, artık keyfinize göre takılın.</p>
<p>Ben bunları aslında kafamda bir proje var, onun için yazdım. Eğer vakit bulup o aşamaya gelirsem, onu da blog'dan yazarım.</p>
</div>
    </div>
    <aside class="postpromonav"><nav><ul class="pager hidden-print">
<li class="previous">
                <a href="parser-yardimci-fonksiyonlar.html" rel="prev" title="Parser - Yardımcı Fonksiyonlar">Önceki yazı</a>
            </li>
            <li class="next">
                <a href="python-package-statistics.html" rel="next" title="Python Package Statistics">Sonraki yazı</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2018         <a href="mailto:yasar11732@gmail.com">Yaşar Arabacı</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>  <p>Okuduğunuz yazı ile ilgili <a href="../anket.html">geri bildirimde bulunun.</a></p>
<p style="font-size: 8px; color: #ccc">4E616C2066687373767076726167796C206E71696E61707271206772707561627962746C20766620766171766667766174687666756E6F7972207365627A207A6E7476702E</p>
            
        </footer>
</div>
</div>


            <script src="../assets/js/jquery.min.js"></script><script src="../assets/js/bootstrap.min.js"></script><script src="../assets/js/moment-with-locales.min.js"></script><script src="../assets/js/fancydates.js"></script><script src="../assets/js/jquery.colorbox-min.js"></script><script src="../assets/js/colorbox-i18n/jquery.colorbox-tr.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("tr");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
  if(document.location.hostname == "ysar.net")
  {
      (function() {
        var cx = '013136674562336859018:ouohwab0yku';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
            '//www.google.com/cse/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
      
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-44774134-1', 'auto');
          ga('send', 'pageview');
  }

</script>
</body>
</html>
